---
- name: install Nginx on webservers
  hosts: webserver1
  become: yes

  tasks:
  - name: update apt cache
    apt:
      update_cache: yes

  - name: install nginx
    apt:
      name: nginx
      state: present

  - name: Deploy custom index.html
    copy:
      dest: /var/www/html/index.html
      content: |
        <!DOCTYPE html>
        <html>
        <head>
            <title>Welcome to {{ inventory_hostname }}</title>
        </head>
        <body>
            <h1>Hello from {{ inventory_hostname }} ðŸš€</h1>
            <p>This server was configured with Ansible.</p>
        </body>
        </html>

  - name: Ensure Nginx is running
    service:
        name: nginx
        state: started
        enabled: true     
...      
